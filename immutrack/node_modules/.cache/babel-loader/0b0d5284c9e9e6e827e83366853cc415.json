{"ast":null,"code":"import axios from 'axios';\nimport { axiosWithAuth } from '../utils/axiosWithAuth';\nexport const SET_CHILD_ACTION = 'SET_CHILD_ACTION';\nexport const SET_IMMUNIZATION_ACTION = 'SET_IMMUNIZATION_ACTION';\nexport function loginAction(userType, credentials) {\n  return function (dispatch) {\n    axiosWithAuth().post(\"/auth/login/\".concat(userType), credentials).then(res => {\n      // console.log('RES FROM LOGIN: ', res);\n      localStorage.setItem('token', res.data.token);\n      axiosWithAuth().get(\"/parent/\".concat(res.data.user.id, \"/children\")).then(res => {\n        dispatch({\n          type: SET_CHILD_ACTION,\n          payload: res.data\n        }); // res.data.map((child, index) => {\n        //     console.log('here');\n        //     axiosWithAuth().get(`/child/${child.id}/immunization`)\n        //         .then(res => {\n        //             console.log('IMMUNIZATIONS LOOP ACTION: ', res);\n        //             dispatch({type: SET_IMMUNIZATION_ACTION, payload: {immuneObj: res.data, index: index}});\n        //         })\n        //         .catch(err => console.log('ERROR IMMUNIZATION REQ: ', err.message));\n        // })\n      }).catch(err => console.log('ERROR CHILD REQ: ', err.message));\n    }).catch(err => console.log('ERROR LOGIN: ', err.message));\n  };\n}\nexport const getImmunizationsAction = childArr => dispatch => {\n  console.log('CHILD ARRAY: ', childArr);\n  childArr.map((childObj, index) => {\n    axiosWithAuth().get(\"/child/\".concat(childObj.id, \"/immunization\")).then(res => {\n      dispatch({\n        type: SET_IMMUNIZATION_ACTION,\n        payload: {\n          immuneObj: res.data,\n          index: index\n        }\n      });\n    }).catch(err => console.log('ERROR IMMUNIZATION REQ: ', err.message));\n  });\n};","map":{"version":3,"sources":["C:\\Users\\Brandon Nichols\\Documents\\VScodeProjects\\BuildWeek-ImmunizationTracker\\Front-End\\immutrack\\src\\actions\\index.js"],"names":["axios","axiosWithAuth","SET_CHILD_ACTION","SET_IMMUNIZATION_ACTION","loginAction","userType","credentials","dispatch","post","then","res","localStorage","setItem","data","token","get","user","id","type","payload","catch","err","console","log","message","getImmunizationsAction","childArr","map","childObj","index","immuneObj"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,aAAT,QAA8B,wBAA9B;AAEA,OAAO,MAAMC,gBAAgB,GAAG,kBAAzB;AACP,OAAO,MAAMC,uBAAuB,GAAG,yBAAhC;AAEP,OAAO,SAASC,WAAT,CAAsBC,QAAtB,EAAgCC,WAAhC,EAA4C;AAC/C,SAAO,UAASC,QAAT,EAAkB;AACrBN,IAAAA,aAAa,GACRO,IADL,uBACyBH,QADzB,GACqCC,WADrC,EAEKG,IAFL,CAEUC,GAAG,IAAI;AACT;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,GAAG,CAACG,IAAJ,CAASC,KAAvC;AACAb,MAAAA,aAAa,GACRc,GADL,mBACoBL,GAAG,CAACG,IAAJ,CAASG,IAAT,CAAcC,EADlC,gBAEKR,IAFL,CAEUC,GAAG,IAAI;AACTH,QAAAA,QAAQ,CAAC;AAACW,UAAAA,IAAI,EAAEhB,gBAAP;AAAyBiB,UAAAA,OAAO,EAAET,GAAG,CAACG;AAAtC,SAAD,CAAR,CADS,CAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,OAbL,EAcKO,KAdL,CAcWC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCF,GAAG,CAACG,OAArC,CAdlB;AAeH,KApBL,EAqBKJ,KArBL,CAqBWC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BF,GAAG,CAACG,OAAjC,CArBlB;AAsBH,GAvBD;AAwBH;AAED,OAAO,MAAMC,sBAAsB,GAAGC,QAAQ,IAAInB,QAAQ,IAAI;AAC1De,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BG,QAA7B;AACAA,EAAAA,QAAQ,CAACC,GAAT,CAAa,CAACC,QAAD,EAAWC,KAAX,KAAqB;AAE9B5B,IAAAA,aAAa,GACRc,GADL,kBACmBa,QAAQ,CAACX,EAD5B,oBAEKR,IAFL,CAEUC,GAAG,IAAI;AACTH,MAAAA,QAAQ,CAAC;AAACW,QAAAA,IAAI,EAAEf,uBAAP;AAAgCgB,QAAAA,OAAO,EAAC;AAACW,UAAAA,SAAS,EAAEpB,GAAG,CAACG,IAAhB;AAAsBgB,UAAAA,KAAK,EAAEA;AAA7B;AAAxC,OAAD,CAAR;AACH,KAJL,EAKKT,KALL,CAKWC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCF,GAAG,CAACG,OAA5C,CALlB;AAMH,GARD;AASH,CAXM","sourcesContent":["import axios from 'axios';\r\nimport { axiosWithAuth } from '../utils/axiosWithAuth';\r\n\r\nexport const SET_CHILD_ACTION = 'SET_CHILD_ACTION';\r\nexport const SET_IMMUNIZATION_ACTION = 'SET_IMMUNIZATION_ACTION';\r\n\r\nexport function loginAction (userType, credentials){\r\n    return function(dispatch){\r\n        axiosWithAuth()\r\n            .post(`/auth/login/${userType}`, credentials)\r\n            .then(res => {\r\n                // console.log('RES FROM LOGIN: ', res);\r\n                localStorage.setItem('token', res.data.token);\r\n                axiosWithAuth()\r\n                    .get(`/parent/${res.data.user.id}/children`)\r\n                    .then(res => {\r\n                        dispatch({type: SET_CHILD_ACTION, payload: res.data});\r\n                        // res.data.map((child, index) => {\r\n                        //     console.log('here');\r\n                        //     axiosWithAuth().get(`/child/${child.id}/immunization`)\r\n                        //         .then(res => {\r\n                        //             console.log('IMMUNIZATIONS LOOP ACTION: ', res);\r\n                        //             dispatch({type: SET_IMMUNIZATION_ACTION, payload: {immuneObj: res.data, index: index}});\r\n                        //         })\r\n                        //         .catch(err => console.log('ERROR IMMUNIZATION REQ: ', err.message));\r\n                        // })\r\n                    })\r\n                    .catch(err => console.log('ERROR CHILD REQ: ', err.message));\r\n            })\r\n            .catch(err => console.log('ERROR LOGIN: ', err.message));\r\n    }\r\n}\r\n\r\nexport const getImmunizationsAction = childArr => dispatch => {\r\n    console.log('CHILD ARRAY: ', childArr);\r\n    childArr.map((childObj, index) => {\r\n\r\n        axiosWithAuth()\r\n            .get(`/child/${childObj.id}/immunization`)\r\n            .then(res => {\r\n                dispatch({type: SET_IMMUNIZATION_ACTION, payload:{immuneObj: res.data, index: index}})\r\n            })\r\n            .catch(err => console.log('ERROR IMMUNIZATION REQ: ', err.message));\r\n    })\r\n}"]},"metadata":{},"sourceType":"module"}
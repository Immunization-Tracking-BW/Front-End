{"ast":null,"code":"import axios from 'axios';\nimport { axiosWithAuth } from '../utils/axiosWithAuth';\nexport const SET_CHILD_ACTION = 'SET_CHILD_ACTION';\nexport const SET_IMMUNIZATION_ACTION = 'SET_IMMUNIZATION_ACTION';\nexport function loginAction(props, credentials) {\n  console.log('here2');\n  return function (dispatch) {\n    axiosWithAuth().post(\"/auth/login/\".concat(props.user), credentials).then(res => {\n      // console.log('RES FROM LOGIN: ', res);\n      localStorage.setItem('token', res.data.token);\n      axiosWithAuth().get(\"/parent/\".concat(res.data.user.id, \"/children\")).then(res => {\n        console.log('here3');\n        dispatch({\n          type: SET_CHILD_ACTION,\n          payload: res.data\n        });\n        res.data.map((child, index) => {\n          console.log('here');\n          axiosWithAuth().get(\"/child/\".concat(child.id, \"/immunization\")).then(res => {\n            console.log('IMMUNIZATIONS LOOP ACTION: ', res);\n            dispatch({\n              type: SET_IMMUNIZATION_ACTION,\n              payload: {\n                immuneObj: res.data,\n                index: index\n              }\n            });\n            console.log('DISPATCH DONE');\n            props.history.push('/patient-home');\n          }).catch(err => console.log('ERROR IMMUNIZATION REQ: ', err.message));\n        });\n      }).catch(err => console.log('ERROR CHILD REQ: ', err.message));\n    }).catch(err => console.log('ERROR LOGIN: ', err.message));\n  };\n}\nexport const getImmunizationsAction = childArr => dispatch => {\n  console.log('CHILD ARRAY: ', childArr); // childArr.map((childObj, index) => {\n  //     axiosWithAuth()\n  //         .get(`/child/${childObj.id}/immunization`)\n  //         .then(res => {\n  //             dispatch({type: SET_IMMUNIZATION_ACTION, payload:{immuneObj: res.data, index: index}})\n  //         })\n  //         .catch(err => console.log('ERROR IMMUNIZATION REQ: ', err.message));\n  // })\n};","map":{"version":3,"sources":["C:\\Users\\Brandon Nichols\\Documents\\VScodeProjects\\BuildWeek-ImmunizationTracker\\Front-End\\immutrack\\src\\actions\\index.js"],"names":["axios","axiosWithAuth","SET_CHILD_ACTION","SET_IMMUNIZATION_ACTION","loginAction","props","credentials","console","log","dispatch","post","user","then","res","localStorage","setItem","data","token","get","id","type","payload","map","child","index","immuneObj","history","push","catch","err","message","getImmunizationsAction","childArr"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,aAAT,QAA8B,wBAA9B;AAEA,OAAO,MAAMC,gBAAgB,GAAG,kBAAzB;AACP,OAAO,MAAMC,uBAAuB,GAAG,yBAAhC;AAEP,OAAO,SAASC,WAAT,CAAsBC,KAAtB,EAA6BC,WAA7B,EAAyC;AAC5CC,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACA,SAAO,UAASC,QAAT,EAAkB;AAErBR,IAAAA,aAAa,GACRS,IADL,uBACyBL,KAAK,CAACM,IAD/B,GACuCL,WADvC,EAEKM,IAFL,CAEUC,GAAG,IAAI;AACT;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,GAAG,CAACG,IAAJ,CAASC,KAAvC;AACAhB,MAAAA,aAAa,GACRiB,GADL,mBACoBL,GAAG,CAACG,IAAJ,CAASL,IAAT,CAAcQ,EADlC,gBAEKP,IAFL,CAEUC,GAAG,IAAI;AACTN,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAC,QAAAA,QAAQ,CAAC;AAACW,UAAAA,IAAI,EAAElB,gBAAP;AAAyBmB,UAAAA,OAAO,EAAER,GAAG,CAACG;AAAtC,SAAD,CAAR;AAEAH,QAAAA,GAAG,CAACG,IAAJ,CAASM,GAAT,CAAa,CAACC,KAAD,EAAQC,KAAR,KAAkB;AAC3BjB,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACAP,UAAAA,aAAa,GAAGiB,GAAhB,kBAA8BK,KAAK,CAACJ,EAApC,oBACKP,IADL,CACUC,GAAG,IAAI;AACTN,YAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA2CK,GAA3C;AACAJ,YAAAA,QAAQ,CAAC;AAACW,cAAAA,IAAI,EAAEjB,uBAAP;AAAgCkB,cAAAA,OAAO,EAAE;AAACI,gBAAAA,SAAS,EAAEZ,GAAG,CAACG,IAAhB;AAAsBQ,gBAAAA,KAAK,EAAEA;AAA7B;AAAzC,aAAD,CAAR;AACAjB,YAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAH,YAAAA,KAAK,CAACqB,OAAN,CAAcC,IAAd,CAAmB,eAAnB;AACH,WANL,EAOKC,KAPL,CAOWC,GAAG,IAAItB,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCqB,GAAG,CAACC,OAA5C,CAPlB;AAQH,SAVD;AAWH,OAjBL,EAkBKF,KAlBL,CAkBWC,GAAG,IAAItB,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCqB,GAAG,CAACC,OAArC,CAlBlB;AAmBH,KAxBL,EAyBKF,KAzBL,CAyBWC,GAAG,IAAItB,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BqB,GAAG,CAACC,OAAjC,CAzBlB;AA0BH,GA5BD;AA6BH;AAED,OAAO,MAAMC,sBAAsB,GAAGC,QAAQ,IAAIvB,QAAQ,IAAI;AAC1DF,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BwB,QAA7B,EAD0D,CAE1D;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,CAXM","sourcesContent":["import axios from 'axios';\r\nimport { axiosWithAuth } from '../utils/axiosWithAuth';\r\n\r\nexport const SET_CHILD_ACTION = 'SET_CHILD_ACTION';\r\nexport const SET_IMMUNIZATION_ACTION = 'SET_IMMUNIZATION_ACTION';\r\n\r\nexport function loginAction (props, credentials){\r\n    console.log('here2');\r\n    return function(dispatch){\r\n        \r\n        axiosWithAuth()\r\n            .post(`/auth/login/${props.user}`, credentials)\r\n            .then(res => {\r\n                // console.log('RES FROM LOGIN: ', res);\r\n                localStorage.setItem('token', res.data.token);\r\n                axiosWithAuth()\r\n                    .get(`/parent/${res.data.user.id}/children`)\r\n                    .then(res => {\r\n                        console.log('here3');\r\n                        dispatch({type: SET_CHILD_ACTION, payload: res.data});\r\n                        \r\n                        res.data.map((child, index) => {\r\n                            console.log('here');\r\n                            axiosWithAuth().get(`/child/${child.id}/immunization`)\r\n                                .then(res => {\r\n                                    console.log('IMMUNIZATIONS LOOP ACTION: ', res);\r\n                                    dispatch({type: SET_IMMUNIZATION_ACTION, payload: {immuneObj: res.data, index: index}});\r\n                                    console.log('DISPATCH DONE');\r\n                                    props.history.push('/patient-home');\r\n                                })\r\n                                .catch(err => console.log('ERROR IMMUNIZATION REQ: ', err.message));\r\n                        })\r\n                    })\r\n                    .catch(err => console.log('ERROR CHILD REQ: ', err.message));\r\n            })\r\n            .catch(err => console.log('ERROR LOGIN: ', err.message));\r\n    }\r\n}\r\n\r\nexport const getImmunizationsAction = childArr => dispatch => {\r\n    console.log('CHILD ARRAY: ', childArr);\r\n    // childArr.map((childObj, index) => {\r\n\r\n    //     axiosWithAuth()\r\n    //         .get(`/child/${childObj.id}/immunization`)\r\n    //         .then(res => {\r\n    //             dispatch({type: SET_IMMUNIZATION_ACTION, payload:{immuneObj: res.data, index: index}})\r\n    //         })\r\n    //         .catch(err => console.log('ERROR IMMUNIZATION REQ: ', err.message));\r\n    // })\r\n}"]},"metadata":{},"sourceType":"module"}
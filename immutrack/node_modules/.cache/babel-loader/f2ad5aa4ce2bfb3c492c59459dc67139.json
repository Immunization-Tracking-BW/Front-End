{"ast":null,"code":"import axios from 'axios';\nimport { axiosWithAuth } from '../utils/axiosWithAuth';\nexport const SET_CHILD_ACTION = 'SET_CHILD_ACTION';\nexport const SET_IMMUNIZATION_ACTION = 'SET_IMMUNIZATION_ACTION';\nexport const SET_USER_ACTION = 'SET_USER_ACTION';\nexport const loginAction = (props, credentials) => dispatch => {\n  let userId = -1;\n  axiosWithAuth().post(\"/auth/login/\".concat(props.user), credentials).then(res => {\n    // console.log('RES FROM LOGIN: ', res);\n    localStorage.setItem('token', res.data.token);\n    userId = res.data.user.id;\n    dispatch({\n      type: SET_USER_ACTION,\n      payload: userId\n    });\n    getChildrenAction(userId, props)(dispatch);\n  }).catch(err => console.log('ERROR LOGIN: ', err));\n};\nexport const getImmunizations = (childArr, history) => dispatch => {\n  childArr.map((child, index) => {\n    console.log('al;sdjfl;kajfdlja;fdsl');\n    axiosWithAuth().get(\"/child/\".concat(child.id, \"/immunization\")).then(res => {\n      dispatch({\n        type: SET_IMMUNIZATION_ACTION,\n        payload: {\n          immuneObj: res.data,\n          index: index\n        }\n      });\n      if (index === childArr.length - 1) history.push(\"/patient-home\");\n    }).catch(err => console.log('ERROR IMMUNIZATION REQ: ', err));\n  });\n};\nexport const getChildrenAction = (parentId, props) => dispatch => {\n  axiosWithAuth().get(\"/parent/\".concat(parentId, \"/children\")).then(res => {\n    dispatch({\n      type: SET_CHILD_ACTION,\n      payload: res.data\n    });\n    console.log('RES DATA: ', res.data); // console.log('SET CHILD');\n\n    getImmunizations(res.data, props.history)(dispatch); //    console.log('RES_DATA: ', res.data);\n  }).catch(err => console.log('ERROR CHILD REQ: ', err));\n};\nexport const addChildAction = (parentId, childObj, props) => dispatch => {\n  axiosWithAuth().post(\"/parent/\".concat(parentId, \"/children\"), childObj).then(res => {\n    console.log('RES FROM ADD CHILD ACTION: ', res);\n    getChildrenAction(parentId, props)(dispatch);\n  }).catch(err => console.log('ERROR: ', err));\n};\nexport const updateChildAction = (vacId, vacObj, props, userId) => dispatch => {\n  const vaccineObjectReq = {\n    vaccine: \"Editedd\",\n    immunizationCompleted: false,\n    date: vacObj.date,\n    location: vacObj.location,\n    grantPermission: false,\n    nextImmunizationDate: vacObj.nextImmunizationDate || ''\n  };\n  const vaccineObjectText = {\n    vaccine: \"Editedd\",\n    date: \"11/1k1ff555/17\",\n    location: \"XXX Medical City\",\n    immunizationCompleted: false,\n    grantPermission: true\n  };\n  console.log('VAC OBJ: ', vaccineObjectReq);\n  console.log('VAC OBJ TEXT: ', vaccineObjectText);\n  axiosWithAuth().put(\"/child/immunization/\".concat(vacId), vaccineObjectReq).then(res => {\n    console.log('Success Put: ', res);\n    getChildrenAction(userId, props)(dispatch);\n  }).catch(err => console.log('ERROR: ', err));\n};","map":{"version":3,"sources":["C:\\Users\\Brandon Nichols\\Documents\\VScodeProjects\\BuildWeek-ImmunizationTracker\\Front-End\\immutrack\\src\\actions\\index.js"],"names":["axios","axiosWithAuth","SET_CHILD_ACTION","SET_IMMUNIZATION_ACTION","SET_USER_ACTION","loginAction","props","credentials","dispatch","userId","post","user","then","res","localStorage","setItem","data","token","id","type","payload","getChildrenAction","catch","err","console","log","getImmunizations","childArr","history","map","child","index","get","immuneObj","length","push","parentId","addChildAction","childObj","updateChildAction","vacId","vacObj","vaccineObjectReq","vaccine","immunizationCompleted","date","location","grantPermission","nextImmunizationDate","vaccineObjectText","put"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,aAAT,QAA8B,wBAA9B;AAEA,OAAO,MAAMC,gBAAgB,GAAG,kBAAzB;AACP,OAAO,MAAMC,uBAAuB,GAAG,yBAAhC;AACP,OAAO,MAAMC,eAAe,GAAG,iBAAxB;AAEP,OAAO,MAAMC,WAAW,GAAG,CAACC,KAAD,EAAQC,WAAR,KAAwBC,QAAQ,IAAG;AACtD,MAAIC,MAAM,GAAG,CAAC,CAAd;AACAR,EAAAA,aAAa,GACRS,IADL,uBACyBJ,KAAK,CAACK,IAD/B,GACuCJ,WADvC,EAEKK,IAFL,CAEUC,GAAG,IAAI;AACT;AACAC,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,GAAG,CAACG,IAAJ,CAASC,KAAvC;AACAR,IAAAA,MAAM,GAAGI,GAAG,CAACG,IAAJ,CAASL,IAAT,CAAcO,EAAvB;AACAV,IAAAA,QAAQ,CAAC;AAACW,MAAAA,IAAI,EAAEf,eAAP;AAAwBgB,MAAAA,OAAO,EAAEX;AAAjC,KAAD,CAAR;AACAY,IAAAA,iBAAiB,CAACZ,MAAD,EAASH,KAAT,CAAjB,CAAiCE,QAAjC;AACH,GARL,EASKc,KATL,CASWC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BF,GAA7B,CATlB;AAUP,CAZM;AAcP,OAAO,MAAMG,gBAAgB,GAAG,CAACC,QAAD,EAAWC,OAAX,KAAuBpB,QAAQ,IAAI;AAE3DmB,EAAAA,QAAQ,CAACE,GAAT,CAAa,CAACC,KAAD,EAAQC,KAAR,KAAkB;AAC3BP,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACAxB,IAAAA,aAAa,GAAG+B,GAAhB,kBAA8BF,KAAK,CAACZ,EAApC,oBACCN,IADD,CACMC,GAAG,IAAI;AACLL,MAAAA,QAAQ,CAAC;AAACW,QAAAA,IAAI,EAAEhB,uBAAP;AAAgCiB,QAAAA,OAAO,EAAE;AAACa,UAAAA,SAAS,EAAEpB,GAAG,CAACG,IAAhB;AAAsBe,UAAAA,KAAK,EAAEA;AAA7B;AAAzC,OAAD,CAAR;AACA,UAAGA,KAAK,KAAKJ,QAAQ,CAACO,MAAT,GAAkB,CAA/B,EACIN,OAAO,CAACO,IAAR;AACP,KALL,EAMCb,KAND,CAMOC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCF,GAAxC,CANd;AAOH,GATD;AAWP,CAbM;AAeP,OAAO,MAAMF,iBAAiB,GAAG,CAACe,QAAD,EAAW9B,KAAX,KAAqBE,QAAQ,IAAI;AAE1DP,EAAAA,aAAa,GACT+B,GADJ,mBACmBI,QADnB,gBAEIxB,IAFJ,CAESC,GAAG,IAAI;AACTL,IAAAA,QAAQ,CAAC;AAACW,MAAAA,IAAI,EAAEjB,gBAAP;AAAyBkB,MAAAA,OAAO,EAAEP,GAAG,CAACG;AAAtC,KAAD,CAAR;AACAQ,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BZ,GAAG,CAACG,IAA9B,EAFS,CAGT;;AACAU,IAAAA,gBAAgB,CAACb,GAAG,CAACG,IAAL,EAAWV,KAAK,CAACsB,OAAjB,CAAhB,CAA0CpB,QAA1C,EAJS,CAKZ;AACA,GARJ,EASIc,KATJ,CASUC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCF,GAAjC,CATjB;AAUP,CAZM;AAcP,OAAO,MAAMc,cAAc,GAAG,CAACD,QAAD,EAAWE,QAAX,EAAqBhC,KAArB,KAA+BE,QAAQ,IAAI;AACrEP,EAAAA,aAAa,GACRS,IADL,mBACqB0B,QADrB,gBAC0CE,QAD1C,EAEK1B,IAFL,CAEUC,GAAG,IAAI;AACTW,IAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,EAA2CZ,GAA3C;AACAQ,IAAAA,iBAAiB,CAACe,QAAD,EAAW9B,KAAX,CAAjB,CAAmCE,QAAnC;AACH,GALL,EAMKc,KANL,CAMWC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBF,GAAvB,CANlB;AAOH,CARM;AAUP,OAAO,MAAMgB,iBAAiB,GAAG,CAACC,KAAD,EAAQC,MAAR,EAAgBnC,KAAhB,EAAuBG,MAAvB,KAAkCD,QAAQ,IAAI;AAE3E,QAAMkC,gBAAgB,GAAG;AACCC,IAAAA,OAAO,EAAE,SADV;AAECC,IAAAA,qBAAqB,EAAE,KAFxB;AAGCC,IAAAA,IAAI,EAAEJ,MAAM,CAACI,IAHd;AAICC,IAAAA,QAAQ,EAAEL,MAAM,CAACK,QAJlB;AAKCC,IAAAA,eAAe,EAAE,KALlB;AAMCC,IAAAA,oBAAoB,EAAEP,MAAM,CAACO,oBAAP,IAA+B;AANtD,GAAzB;AASA,QAAMC,iBAAiB,GAAG;AACEN,IAAAA,OAAO,EAAE,SADX;AAEEE,IAAAA,IAAI,EAAE,gBAFR;AAGEC,IAAAA,QAAQ,EAAE,kBAHZ;AAIEF,IAAAA,qBAAqB,EAAE,KAJzB;AAKEG,IAAAA,eAAe,EAAE;AALnB,GAA1B;AAOAvB,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBiB,gBAAzB;AACAlB,EAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BwB,iBAA9B;AACAhD,EAAAA,aAAa,GACRiD,GADL,+BACgCV,KADhC,GACyCE,gBADzC,EAEK9B,IAFL,CAEUC,GAAG,IAAI;AACTW,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BZ,GAA7B;AACAQ,IAAAA,iBAAiB,CAACZ,MAAD,EAASH,KAAT,CAAjB,CAAiCE,QAAjC;AACH,GALL,EAMKc,KANL,CAMWC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBF,GAAvB,CANlB;AAOH,CA3BM","sourcesContent":["import axios from 'axios';\r\nimport { axiosWithAuth } from '../utils/axiosWithAuth';\r\n\r\nexport const SET_CHILD_ACTION = 'SET_CHILD_ACTION';\r\nexport const SET_IMMUNIZATION_ACTION = 'SET_IMMUNIZATION_ACTION';\r\nexport const SET_USER_ACTION = 'SET_USER_ACTION';\r\n\r\nexport const loginAction = (props, credentials) => dispatch =>{\r\n        let userId = -1;\r\n        axiosWithAuth()\r\n            .post(`/auth/login/${props.user}`, credentials)\r\n            .then(res => {\r\n                // console.log('RES FROM LOGIN: ', res);\r\n                localStorage.setItem('token', res.data.token);\r\n                userId = res.data.user.id;\r\n                dispatch({type: SET_USER_ACTION, payload: userId});\r\n                getChildrenAction(userId, props)(dispatch);\r\n            })\r\n            .catch(err => console.log('ERROR LOGIN: ', err));\r\n}\r\n\r\nexport const getImmunizations = (childArr, history) => dispatch => {\r\n    \r\n        childArr.map((child, index) => {\r\n            console.log('al;sdjfl;kajfdlja;fdsl');\r\n            axiosWithAuth().get(`/child/${child.id}/immunization`)\r\n            .then(res => {\r\n                    dispatch({type: SET_IMMUNIZATION_ACTION, payload: {immuneObj: res.data, index: index}});\r\n                    if(index === childArr.length - 1)\r\n                        history.push(`/patient-home`);\r\n                })\r\n            .catch(err => console.log('ERROR IMMUNIZATION REQ: ', err));\r\n        });\r\n\r\n}\r\n\r\nexport const getChildrenAction = (parentId, props) => dispatch => {\r\n    \r\n        axiosWithAuth()\r\n           .get(`/parent/${parentId}/children`)\r\n           .then(res => {\r\n               dispatch({type: SET_CHILD_ACTION, payload: res.data});\r\n               console.log('RES DATA: ', res.data);\r\n               // console.log('SET CHILD');\r\n               getImmunizations(res.data, props.history)(dispatch);\r\n            //    console.log('RES_DATA: ', res.data);\r\n           })\r\n           .catch(err => console.log('ERROR CHILD REQ: ', err));\r\n}\r\n\r\nexport const addChildAction = (parentId, childObj, props) => dispatch => {\r\n    axiosWithAuth()\r\n        .post(`/parent/${parentId}/children`, childObj)\r\n        .then(res => {\r\n            console.log('RES FROM ADD CHILD ACTION: ', res);\r\n            getChildrenAction(parentId, props)(dispatch);\r\n        })\r\n        .catch(err => console.log('ERROR: ', err));\r\n}\r\n\r\nexport const updateChildAction = (vacId, vacObj, props, userId) => dispatch => {\r\n\r\n    const vaccineObjectReq = {\r\n                              vaccine: \"Editedd\",\r\n                              immunizationCompleted: false,\r\n                              date: vacObj.date,\r\n                              location: vacObj.location,\r\n                              grantPermission: false,\r\n                              nextImmunizationDate: vacObj.nextImmunizationDate || ''\r\n                            };\r\n                            \r\n    const vaccineObjectText = {\r\n                                vaccine: \"Editedd\",\r\n                                date: \"11/1k1ff555/17\",\r\n                                location: \"XXX Medical City\",\r\n                                immunizationCompleted: false,\r\n                                grantPermission: true\r\n                            }\r\n    console.log('VAC OBJ: ', vaccineObjectReq);\r\n    console.log('VAC OBJ TEXT: ', vaccineObjectText);\r\n    axiosWithAuth()\r\n        .put(`/child/immunization/${vacId}`, vaccineObjectReq)\r\n        .then(res => {\r\n            console.log('Success Put: ', res);\r\n            getChildrenAction(userId, props)(dispatch);\r\n        })\r\n        .catch(err => console.log('ERROR: ', err));\r\n}"]},"metadata":{},"sourceType":"module"}